---
title: 小说更新后发送邮箱的问题解决
date: 2018-11-23 16:54:00
tags: python
---
## 遇到的问题
 - 先上一张图，看一下问题在哪
 ![1.png](1.png)

从图上我们可以看到，虽然小说是每天发两次给我，但是有时候会漏掉一章，有时候又会重复发一章，这都是小说作者不按时更新惹的祸啊！！！既然小说作者的习惯改变不了，那就完善自我吧!

## 新的思路，加一个“缓存”
缓存是什么意思呢？
- 本地建一个名为origin.txt的文本文件，每次爬取完成后与origin.txt里面的内容对比一下。
- 如果一样则不发送。
- 如果不一样就发送，并且将最新的内容保存到origin.txt文件中，作为下一次的对照。

## 演示效果
- 再origin.txt里写入test，然后启动
![2.png](2.png)
我们可以看到，origin文件已被重新写入，并且新的文本已经发送到邮箱
- 再次启动，也就是还没跟新的情况
![3](3.png)
我们看到，提示消息，这里不会跟新origin，也不会发送邮件

## 还遗留的问题
- 如果作者一下爆发怎么办（一分钟更新十章！）
思考一下，其实原理差不多，缓存大小不同罢了！有兴趣的可以尝试一下！
## 项目源码已发布在github
[https://github.com/huzai9527/fictionSend](https://github.com/huzai9527/fictionSend)
